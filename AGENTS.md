# AGENTS.md

> Multi-agent workflow for **OnePan**, a warm, focused, Flutter-based cooking app. Code may be generated by LLMs, but direction, constraints, and acceptance criteria come from the human-authored docs below.

---

## üìå Source of Truth (All Agents MUST Read)

| Purpose | Doc |
|--------|-----|
| Vision, tone, and promise | [README.md](./README.md) |
| MVP screens and milestones | [Project_Plan.md](./Project_Plan.md) |
| Feature rules, substitution logic, data contracts | [Project_Specs.md](./Project_Specs.md) |
| Visual tone, spacing, and interaction rules | [UI_Principles.md](./UI_Principles.md) |

**Order of authority if conflicts appear:**  
[UI_Principles.md](./UI_Principles.md) ‚Üí [Project_Specs.md](./Project_Specs.md) ‚Üí [Project_Plan.md](./Project_Plan.md) ‚Üí [README.md](./README.md)

The 6-screen flow (Onboarding ‚Üí Home ‚Üí Customize ‚Üí Ingredients ‚Üí Finalizer ‚Üí Recipe)  
is defined in [Project_Plan.md](./Project_Plan.md).

---

## üß© Architecture & Tech Stack (Summary)

- **Platform:** Flutter (Android MVP first)  
- **Routing:** `go_router`  
- **State:** `Riverpod`  
- **Data:** `Hive` (saved recipes), `SharedPreferences` (prefs), `dio` (network)  
- **LLM / Remote:** Optional behind a replaceable repository (mock first)  
- **Separation:** Data ‚Üí Domain ‚Üí UI; repositories must be swappable

Keep the screen limit and scope per [Project_Plan.md](./Project_Plan.md) and follow UI rules in [UI_Principles.md](./UI_Principles.md).

---

## üé≠ Agents & Responsibilities

### 1) Product Owner (PO-Agent)
- Convert the four core docs into user stories with acceptance criteria.
- Guard MVP scope (no extra screens or features).
- **Output:** `docs/stories/*.md`, labeled backlog.

### 2) UX-Agent (Design System & Flow)
- Encode palette/spacing/type/interaction rules from [UI_Principles.md](./UI_Principles.md).
- Produce component contracts and screen states (loading/empty/error/ready).
- Enforce ‚Äúone primary CTA.‚Äù
- **Output:** `ui/components.md`, token definitions under `lib/app/theme/*`.

### 3) ARCH-Agent (Architecture)
- Own folder structure, DI, and routing.
- Ensure repositories are swappable; LLM is optional.
- **Output:** `docs/architecture.md`, base Flutter scaffold, CI config.

### 4) DATA-Agent (Schema & Seeds)
- Define **Recipe v1** models and step/ingredient structure tied to [Project_Specs.md](./Project_Specs.md).
- Provide 3‚Äì10 curated seed recipes.
- **Output:** `lib/data/models/*`, `assets/recipes.json`.

### 5) FE-Agent (Flutter UI)
- Build the six screens using tokens (no raw hex/magic numbers).
- Implement all states and accessibility sizing from [UI_Principles.md](./UI_Principles.md).
- **Output:** `lib/features/*` screens and shared widgets.

### 6) BE-Agent (Repositories & Adapters)
- Implement mock substitution source that follows contracts in [Project_Specs.md](./Project_Specs.md).
- Optionally add remote/LLM source behind the same interface.
- **Output:** `lib/data/repositories/*`, `lib/data/sources/{local,remote}/*`.

### 7) QA-Agent (Quality)
- Widget/unit/golden tests; scenario flows per [Project_Plan.md](./Project_Plan.md).
- Keep flake rate low; cover happy paths and common errors.
- **Output:** `test/{unit,widget,golden}/*`.

### 8) DOCS-Agent (Docs & Releases)
- Keep docs current with every PR; maintain contributor path.
- **Output:** `CONTRIBUTING.md`, `CHANGELOG.md`, updates to `/docs`.

---

## ‚úÖ Working Rules

- **Contracts first:** Define schema, tokens, and screen states before feature work.  
- **No scope creep:** Only the 6 MVP screens from [Project_Plan.md](./Project_Plan.md).  
- **Design tokens only:** No hardcoded spacing, sizes, or colors; follow [UI_Principles.md](./UI_Principles.md).  
- **Small PRs:** Prefer tight loops and clear diffs; include screenshots for UI changes.  
- **LLM code is reviewed:** AI can draft, humans must approve.

---

## ‚úÖ Definition of Done

A feature is complete only if:
1. It meets acceptance criteria from PO-Agent stories.  
2. UI and interactions conform to [UI_Principles.md](./UI_Principles.md).  
3. Data contracts and behavior follow [Project_Specs.md](./Project_Specs.md).  
4. It stays within scope of [Project_Plan.md](./Project_Plan.md).  
5. Tests pass, and loading/empty/error states are implemented.

---

## üéØ MVP Outcome

A user can:
1. Set onboarding preferences  
2. Browse recipes  
3. Customize time/servings/spice  
4. Pick ingredients they have  
5. Finalize the ingredient list (mock substitutions)  
6. Follow a clean recipe view

No additional features until after MVP.

---

## üöß Post-MVP (Locked Until After First Release)

- Live LLM substitutions  
- Step adaptation  
- Pantry memory  
- Cook-mode timers

(Tracked but not part of MVP; revisit after initial release.)
